<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tendor — Find Local Help Fast</title>
  <meta name="description" content="Tendor matches neighbors with local freelancers for quick gigs — lawn care, tutoring, moving help, pet sitting and more." />
  <meta name="theme-color" content="#ff6b6b" />
  <!-- (Optional) PWA hooks if you add these files later -->
  <link rel="manifest" href="/manifest.webmanifest" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="apple-touch-icon" href="/icons/icon-192.png" />
  <style>
    *,*::before,*::after{box-sizing:border-box}
    html,body{margin:0;height:100%}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;line-height:1.5;color:#0b1220;background:var(--bg)}
    img{max-width:100%;display:block}
    a{text-decoration:none;color:inherit}
    button{font:inherit;cursor:pointer}

    :root{
      --bg:#fff7ed; --panel:#fff; --text:#0b1220; --muted:#475569;
      --brand:#ff4d6d; --brand-2:#ffb703; --accent:#06d6a0;
      --ok:#22c55e; --danger:#ef4444; --ring:rgba(255,109,109,.35);
      --shadow:0 12px 32px rgba(2,6,23,.15); --radius:16px;
    }

    header{position:sticky;top:0;background:#fff7ed;border-bottom:1px solid rgba(2,6,23,.06);z-index:30}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 10px}
    .logo{display:flex;align-items:center;gap:10px;font-weight:900}
    .logo-mark{width:34px;height:34px;border-radius:9px;background:conic-gradient(from 210deg,var(--brand),var(--brand-2),var(--accent));box-shadow:0 6px 18px rgba(255,77,109,.35)}
    .btn{padding:10px 14px;border-radius:12px;border:1px solid rgba(2,6,23,.08);background:#fff}
    .btn.primary{background:linear-gradient(180deg,var(--brand),var(--brand-2));color:#081018;font-weight:800;border:none}
    .btn:hover{box-shadow:var(--shadow);transform:translateY(-1px)}

    .screen{display:none}
    .screen.active{display:block}

    /* HERO */
    .hero-inner{display:grid;grid-template-columns:1.1fr .9fr;gap:26px;align-items:center;padding:40px 10px 26px}
    @media (max-width: 900px){.hero-inner{grid-template-columns:1fr;padding:28px 10px}}
    .eyebrow{display:inline-block;margin-bottom:8px;padding:6px 10px;border-radius:999px;background:rgba(255,77,109,.12);border:1px solid rgba(255,77,109,.35);font-weight:800;color:#a4161a}
    .headline{font-size:clamp(28px,5.2vw,56px);line-height:1.05;margin:0;background:linear-gradient(180deg,#111827,#334155);-webkit-background-clip:text;background-clip:text;color:transparent;font-weight:900}
    .subhead{color:#334155;font-size:clamp(15px,2.2vw,18px);margin:14px 0 22px;max-width:700px}

    .section{padding:28px 10px}
    .panel{background:var(--panel);border:1px solid rgba(2,6,23,.08);border-radius:var(--radius);padding:16px;box-shadow:var(--shadow)}
    .features{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
    @media (max-width: 900px){.features{grid-template-columns:1fr}}
    .feature{border-radius:16px;background:var(--panel);border:1px solid rgba(2,6,23,.08);padding:16px}

    /* Landing demo */
    .demo-wrap{position:relative;border-radius:16px;overflow:hidden;box-shadow:var(--shadow);border:1px solid rgba(2,6,23,.08);margin:18px 0}
    .demo-wrap img{width:100%;height:360px;object-fit:cover}
    .demo-badge{position:absolute;top:12px;left:12px;background:#bbf7d0;border-radius:999px;padding:6px 10px;font-weight:700}
    .demo-card{position:absolute;left:12px;right:12px;bottom:62px;background:#fff;border:1px solid rgba(2,6,23,.1);border-radius:14px;padding:12px;box-shadow:0 10px 24px rgba(2,6,23,.18)}
    .demo-title{display:flex;justify-content:space-between;align-items:center}
    .demo-actions{position:absolute;left:0;right:0;bottom:10px;display:flex;gap:14px;justify-content:center}
    .demo-btn{width:60px;height:60px;border-radius:50%;border:none;font-size:22px;font-weight:900;color:#081018}
    .demo-btn.no{background:var(--danger)}
    .demo-btn.yes{background:var(--ok)}
    .demo-toast{position:absolute;top:12px;right:12px;background:#111827;color:#fff;padding:8px 10px;border-radius:10px;display:none}

    /* Customer deck */
    .toolbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between;margin-bottom:14px}
    .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{padding:6px 10px;border:1px solid rgba(2,6,23,.12);border-radius:999px;background:#fff;cursor:pointer}
    .chip.active{border-color:rgba(255,77,109,.6);box-shadow:0 0 0 4px var(--ring)}
    .search{flex:1;min-width:220px}
    .input{width:100%;padding:10px 12px;border-radius:12px;border:1px solid rgba(2,6,23,.12)}
    .deck-wrap{display:grid;grid-template-columns:1fr;gap:12px}
    .deck{position:relative;height:480px;border-radius:20px}
    @media (max-width: 520px){.deck{height:420px}}
    .tcard{position:absolute;inset:0;margin:auto;width:min(520px,100%);height:100%;border-radius:20px;background:#fff;border:1px solid rgba(2,6,23,.12);box-shadow:0 20px 50px rgba(2,6,23,.15);touch-action:none;user-select:none}
    .tcard.hidden{display:none}
    .card-header{position:relative;height:56%;border-bottom:1px solid rgba(2,6,23,.08);display:flex;align-items:center;justify-content:center;overflow:hidden;border-top-left-radius:20px;border-top-right-radius:20px}
    .avatar{width:100%;height:100%;background:conic-gradient(from 180deg at 50% 50%,#ffe08a,#ff4d6d,#06d6a0,#ffd166);opacity:.9}
    .photo{width:100%;height:100%;object-fit:cover;display:block}
    .badge{position:absolute;top:12px;left:12px;padding:6px 10px;border-radius:999px;font-weight:700;box-shadow:0 8px 18px rgba(0,0,0,.08)}
    .badge.ok{background:#bbf7d0}.badge.new{background:#fde68a}
    .price{position:absolute;bottom:12px;right:12px;background:#fff;border:1px solid rgba(2,6,23,.12);border-radius:12px;padding:6px 10px}
    .card-body{padding:14px}
    .title{display:flex;align-items:center;gap:10px}
    .title h3{margin:0;font-size:22px}.rating{color:#efb01b;font-weight:800}
    .meta{display:flex;gap:10px;color:#0ea5e9;flex-wrap:wrap}
    .skills{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0}
    .skills .pill{padding:6px 10px;border-radius:999px;background:#fff7ed;border:1px solid rgba(2,6,23,.12)}
    .bio{color:#0b1220}
    .card-actions{display:flex;gap:14px;justify-content:center;margin-top:14px}
    .circle-btn{width:60px;height:60px;border-radius:50%;border:none;font-size:22px;font-weight:900;color:#081018}
    .circle-btn.no{background:var(--danger)} .circle-btn.yes{background:var(--ok)}
    .hint{color:#334155;text-align:center;margin-top:8px}
    .matches{margin-top:14px}
    .match-item{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:10px;border-radius:12px;border:1px solid rgba(2,6,23,.12);background:#fff}
    .mini{width:36px;height:36px;border-radius:10px;background:linear-gradient(180deg,var(--brand),var(--brand-2))}
    .board{display:grid;grid-template-columns:1fr;gap:10px}
    .job{display:flex;justify-content:space-between;gap:12px;align-items:center;padding:12px;border-radius:14px;border:1px solid rgba(2,6,23,.12);background:#fff}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <a class="logo" href="#home" aria-label="Tendor home">
        <div class="logo-mark" aria-hidden="true"></div>
        <span>Tendor</span>
      </a>
      <nav class="nav-actions">
        <button class="btn" id="launch-app">Open App</button>
        <a class="btn" href="#how">How it works</a>
        <button class="btn" id="open-post">Post a Job</button>
        <button class="btn primary" id="open-join">Become a Freelancer</button>
      </nav>
    </div>
  </header>

  <!-- LANDING -->
  <main id="screen-landing" class="screen active">
    <section class="hero" id="home">
      <div class="container hero-inner">
        <div>
          <span class="eyebrow">BRIGHT • FAST • LOCAL</span>
          <h1 class="headline">Find local help in seconds — swipe, match, done.</h1>
          <p class="subhead">Tendor is a community marketplace that feels like Tinder, built for real-world jobs: lawn care, dog walking, tutoring, moving help, and more.</p>
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
            <button class="btn primary" id="cta-open-app">Get the App</button>
            <button class="btn" id="cta-join">Become a Freelancer</button>
          </div>
        </div>
        <div class="panel" aria-label="App preview" style="border-radius:20px;position:relative;overflow:hidden">
          <img alt="Preview" src="data:image/svg+xml;utf8,<?xml version='1.0' encoding='UTF-8'?><svg xmlns='http://www.w3.org/2000/svg' width='900' height='700'><defs><linearGradient id='g' x1='0' x2='1'><stop offset='0' stop-color='%23ff4d6d'/><stop offset='1' stop-color='%23ffb703'/></linearGradient></defs><rect width='100%' height='100%' fill='%23fff7ed'/><g opacity='0.25'><circle cx='250' cy='120' r='160' fill='url(%23g)'/><circle cx='650' cy='200' r='200' fill='url(%23g)'/></g><g fill='%23111827' font-family='Arial' font-size='32' font-weight='700'><text x='60' y='90'>Swipe ▶ Match ▶ Hire</text></g><g fill='%23334155' font-family='Arial' font-size='20'><text x='60' y='140'>Below is how the app feels.</text></g></svg>"/>
        </div>
      </div>
    </section>

    <section class="section" id="how">
      <div class="container">
        <h2>How it works</h2>
        <div class="features">
          <div class="feature"><h4>1) Post or browse</h4><p>List your job or browse nearby freelancers.</p></div>
          <div class="feature"><h4>2) Swipe to shortlist</h4><p>Swipe right to match, left to pass.</p></div>
          <div class="feature"><h4>3) Book & review</h4><p>Clear rates, secure pay, and reviews to keep quality high.</p></div>
        </div>

        <!-- Interactive accept/decline demo using lawn.jpg -->
        <div id="demo-lawn" class="demo-wrap" aria-label="Interactive example">
          <img id="demo-img" src="/images/lawn.jpg" alt="Freshly cut lawn with a local worker in the background">
          <span class="demo-badge" id="demo-badge">Lawn Care</span>
          <div class="demo-card">
            <div class="demo-title">
              <strong id="demo-name">Ava R.</strong>
              <span id="demo-price" style="color:#334155">$28/hr • 2 mi</span>
            </div>
            <div id="demo-skills" style="color:#64748b;font-size:14px">Mowing • edging • cleanup</div>
          </div>
          <div class="demo-actions">
            <button class="demo-btn no" id="demo-no" type="button" title="Pass">✖</button>
            <button class="demo-btn yes" id="demo-yes" type="button" title="Match">✔</button>
          </div>
          <div class="demo-toast" id="demo-toast"></div>
        </div>

        <div style="display:flex;gap:10px;flex-wrap:wrap">
          <button class="btn primary" id="open-app-2">Open the App</button>
          <button class="btn" id="open-join-2">Become a Freelancer</button>
        </div>
      </div>
    </section>
  </main>

  <!-- WORKER SIGN‑UP (single page) -->
  <main id="screen-worker-signup" class="screen" style="display:none">
    <section class="section">
      <div class="container">
        <div class="panel" style="max-width:760px;margin-inline:auto">
          <h3 style="margin:6px 0 10px">Create your worker account</h3>
          <p style="color:#64748b;margin-top:0">One simple form to create your account and profile.</p>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
            <div><label class="label" for="wName">Full name</label><input class="input" id="wName" placeholder="e.g., Ava R."/></div>
            <div><label class="label" for="wEmail">Email (login)</label><input class="input" id="wEmail" type="email" placeholder="you@example.com"/></div>
            <div><label class="label" for="wPass">Password</label><input class="input" id="wPass" type="password" placeholder="••••••••"/></div>
            <div><label class="label" for="wPhone">Phone</label><input class="input" id="wPhone" placeholder="(555) 555‑5555"/></div>
            <div><label class="label" for="wRate">Hourly rate ($)</label><input class="input" id="wRate" type="number" min="1" step="1" placeholder="28"/></div>
            <div><label class="label" for="wSkills">Skills (comma‑separated)</label><input class="input" id="wSkills" placeholder="mowing, edging, cleanup"/></div>
            <div style="grid-column:1/3"><label class="label" for="wPhoto">Photo URL</label><input class="input" id="wPhoto" placeholder="/images/lawn.jpg"/></div>
            <div style="grid-column:1/3"><label class="label" for="wBio">Short bio</label><textarea class="input" id="wBio" rows="4" placeholder="Tell customers what you do best." style="resize:vertical"></textarea></div>
          </div>
          <div style="display:flex;gap:10px;margin-top:12px;flex-wrap:wrap">
            <button class="btn primary" id="wSubmit">Create worker account</button>
            <button class="btn" id="wBack">Back</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- CUSTOMER APP -->
  <main id="screen-customer" class="screen" style="display:none">
    <section class="section">
      <div class="container">
        <h2>Browse freelancers</h2>
        <p style="color:#64748b">Swipe left (✖) to pass or right (✔) to match. Your matches are saved below.</p>
        <div class="panel">
          <div class="toolbar">
            <div class="chips" id="category-chips" aria-label="Categories"></div>
            <div class="search"><input id="search" class="input" type="search" placeholder="Search skills, e.g. 'math', 'snow', 'dog'" aria-label="Search"/></div>
          </div>
          <div class="deck-wrap">
            <div class="deck" id="deck" aria-live="polite"></div>
            <div class="card-actions">
              <button class="circle-btn no" id="btn-no" title="Pass">✖</button>
              <button class="circle-btn yes" id="btn-yes" title="Match">✔</button>
            </div>
            <div class="hint">Tip: drag the top card left/right or use the buttons</div>
          </div>
        </div>
        <div class="matches" id="matches"></div>
      </div>
    </section>
  </main>

  <!-- WORKER DASHBOARD -->
  <main id="screen-worker" class="screen" style="display:none">
    <section class="section">
      <div class="container">
        <h2>Nearby jobs</h2>
        <p style="color:#64748b">Accept jobs you want. Customers will be notified instantly.</p>
        <div class="panel"><div id="jobBoard" class="board"></div></div>
        <div class="panel" style="margin-top:12px">
          <h3 style="margin-top:0">My accepted jobs</h3>
          <div id="myJobs" class="board"></div>
        </div>
      </div>
    </section>
  </main>

  <div class="demo-toast" id="toast" style="position:fixed;bottom:16px;left:50%;transform:translateX(-50%);display:none"></div>

  <script>
    // ---------- DATA ----------
    const DEFAULT_CATEGORIES = ['Lawn Care','Dog Walking','Tutoring','Moving Help','Snow Removal','Handyman','Cleaning','Baby Sitting','Tech Help','Photography'];
    const DEFAULT_PROFILES = [
      { id:'p1',  name:'Ava R.',    category:'Lawn Care',  rate:28, rating:4.9, distance:2, skills:['mowing','edging','leaf cleanup'], bio:'Fast, reliable lawn care. Bring my own equipment.', photo:'/images/lawn.jpg', new:true },
      { id:'p10', name:'Jake C.',   category:'Lawn Care',  rate:26, rating:4.7, distance:3, skills:['mowing','edging','cleanup'],       bio:'Affordable lawn care, quick and reliable.',        photo:'/images/lawn.jpg', verified:true },
      { id:'p11', name:'Miguel A.', category:'Lawn Care',  rate:30, rating:4.9, distance:2, skills:['mowing','hedges','trimming'],    bio:'Experienced with big yards and detailed edging.', photo:'/images/lawn.jpg', new:true },
      { id:'p2',  name:'Kayla T.',  category:'Tutoring',   rate:35, rating:5.0, distance:1, skills:['algebra','calculus','SAT'],      bio:'MSU math major — patient & results-driven.',      photo:'' },
      { id:'p3',  name:'Jamal B.',  category:'Dog Walking',rate:22, rating:4.7, distance:3, skills:['walks','overnights'],            bio:'Big-dog friendly. Flexible mornings.',            photo:'' },
      { id:'p4',  name:'Lena G.',   category:'Cleaning',   rate:32, rating:4.9, distance:2, skills:['deep clean','kitchens','bathrooms'], bio:'Sparkling clean, supplies included.',           photo:'' }
    ];

    const store = { get(k,f){ try{return JSON.parse(localStorage.getItem(k)) ?? f }catch{ return f } }, set(k,v){ localStorage.setItem(k, JSON.stringify(v)) } }
    let categories = store.get('tendor_categories', DEFAULT_CATEGORIES)
    let profiles = store.get('tendor_profiles', DEFAULT_PROFILES)
    let matches  = store.get('tendor_matches', [])
    let jobs     = store.get('tendor_jobs', [
      {id:'j1', title:'Move a sofa', category:'Moving Help', budget:80, zip:'48187', desc:'Need help moving a sofa from garage to living room.', email:'alice@example.com', phone:'', createdAt: Date.now()-100000 },
      {id:'j2', title:'Mow small yard', category:'Lawn Care', budget:40, zip:'48188', desc:'Front + back, less than an hour.', email:'bob@example.com',   phone:'', createdAt: Date.now()-500000 },
      {id:'j3', title:'Fix printer',   category:'Tech Help',  budget:50, zip:'48187', desc:"HP printer won't connect to Wi‑Fi.",    email:'carol@example.com', phone:'', createdAt: Date.now()-900000 }
    ])
    let myAccepted = store.get('tendor_my_jobs', [])

    const $ = s=>document.querySelector(s)
    const el = (t,c,h)=>{const x=document.createElement(t); if(c)x.className=c; if(h!=null)x.innerHTML=h; return x}
    const toast = (m)=>{ const t=$('#toast'); t.textContent=m; t.style.display='block'; clearTimeout(toast._id); toast._id=setTimeout(()=>t.style.display='none',2100) }

    // ---------- ROUTING ----------
    const Screens = { landing: $('#screen-landing'), customer: $('#screen-customer'), worker: $('#screen-worker'), workerSignup: $('#screen-worker-signup') }
    function show(name){ Object.values(Screens).forEach(s=> s.style.display='none'); Screens[name]?.style.display='block'; window.scrollTo({top:0,behavior:'instant'}) }
    function routeHome(){ show('landing') }

    // Header & CTA buttons
    $('#launch-app').onclick = ()=> show('customer')
    $('#cta-open-app').onclick = ()=> show('customer')
    $('#open-app-2').onclick = ()=> show('customer')

    // Become a Freelancer → single sign-up page
    $('#open-join').onclick = ()=> show('workerSignup')
    $('#cta-join').onclick = ()=> show('workerSignup')
    $('#open-join-2').onclick = ()=> show('workerSignup')
    $('#wBack').onclick = ()=> routeHome()

    // Worker sign-up
    $('#wSubmit').onclick = ()=>{
      const worker = {
        name: $('#wName').value.trim() || 'New Worker',
        email: $('#wEmail').value.trim(),
        pass: $('#wPass').value.trim(),
        phone: $('#wPhone').value.trim(),
        rate: parseInt($('#wRate').value,10)||25,
        skills: $('#wSkills').value.split(',').map(s=>s.trim()).filter(Boolean),
        bio: $('#wBio').value.trim()||'Local freelancer available.',
        photo: $('#wPhoto').value.trim()||'/images/lawn.jpg',
        category: 'Lawn Care'
      }
      profiles.unshift({ id:'p'+Math.random().toString(36).slice(2,7), name:worker.name, category:worker.category, rate:worker.rate, rating:5.0, distance:1, skills:worker.skills, bio:worker.bio, photo:worker.photo, verified:true })
      store.set('tendor_profiles', profiles)
      toast('Worker account created!')
      show('worker')
    }

    // ----- CUSTOMER: deck -----
    function renderCategoryChips(){
      const wrap = $('#category-chips'); wrap.innerHTML=''
      const all = el('span','chip active','All'); all.dataset.value='All'; wrap.append(all)
      categories.forEach(c=>{ const chip=el('span','chip',c); chip.dataset.value=c; wrap.append(chip) })
      wrap.addEventListener('click', e=>{ const x=e.target.closest('.chip'); if(!x)return; wrap.querySelectorAll('.chip').forEach(c=>c.classList.remove('active')); x.classList.add('active'); rebuildDeck() })
    }
    let deckData=[]; let activeIndex=0; const deckEl=$('#deck')
    const pointer = e=>({ x:e.clientX ?? (e.touches?.[0]?.clientX ?? 0), y:e.clientY ?? (e.touches?.[0]?.clientY ?? 0) })

    function buildCard(p){
      const card=el('div','tcard');
      const header=el('div','card-header');
      if (p.photo) { const img=new Image(); img.src=p.photo; img.alt=`${p.name} photo`; img.className='photo'; img.onerror=()=>{header.append(el('div','avatar'))}; header.append(img) }
      else { header.append(el('div','avatar')) }
      if(p.verified) header.append(el('div','badge ok','Verified'));
      if(p.new) header.append(el('div','badge new','New'));
      header.append(el('div','price',`$${p.rate}/hr`));
      const body=el('div','card-body');
      const title=el('div','title'); title.append(el('h3','',p.name)); title.append(el('div','rating','★ '+p.rating.toFixed(1))); body.append(title)
      const meta=el('div','meta'); meta.innerHTML=`<span>${p.category}</span> · <span>${p.distance} mi</span>`; body.append(meta)
      const skills=el('div','skills'); p.skills.slice(0,5).forEach(s=> skills.append(el('span','pill',s))); body.append(skills)
      body.append(el('p','bio',p.bio));
      card.append(header,body); card.dataset.id=p.id; return card
    }
    function applyFilters(list){
      const activeChip=document.querySelector('.chip.active'); const cat=activeChip?activeChip.dataset.value:'All'; const q=$('#search').value.trim().toLowerCase()
      return list.filter(p => (cat==='All'||p.category===cat) && (q===''|| p.name.toLowerCase().includes(q)|| p.skills.some(s=>s.toLowerCase().includes(q))|| p.bio.toLowerCase().includes(q)))
    }
    function rebuildDeck(){ deckEl.innerHTML=''; deckData=applyFilters([...profiles]); activeIndex=0; if(deckData.length===0){ deckEl.append(el('div','',"<div style='padding:16px;color:#334155'>No results. Try another category or search.</div>")); return } deckData.slice(0,5).reverse().forEach(p=> deckEl.append(buildCard(p))); attachTopCard() }
    function attachTopCard(){ const current=deckEl.lastElementChild; if(!current)return; const maxRotate=18; let startX=0, startY=0, dx=0, dy=0; let dragging=false;
      const onDown=e=>{ dragging=true; const pt=pointer(e); startX=pt.x; startY=pt.y; current.setPointerCapture?.(e.pointerId) }
      const onMove=e=>{ if(!dragging)return; const pt=pointer(e); dx=pt.x-startX; dy=pt.y-startY; const rot=(dx/240)*maxRotate; current.style.transform=`translate(${dx}px, ${dy}px) rotate(${rot}deg)`; current.style.transition='transform 0s' }
      const onUp=()=>{ if(!dragging)return; dragging=false; const threshold=140; if(Math.abs(dx)>threshold){ const dir=dx>0?'right':'left'; swipe(dir) } else { current.style.transition='transform .25s'; current.style.transform='translate(0,0) rotate(0)' } }
      current.onpointerdown=onDown; current.onpointermove=onMove; current.onpointerup=onUp; current.onpointercancel=onUp; current.tabIndex=0; current.onkeydown=e=>{ if(e.key==='ArrowLeft'){ swipe('left') }; if(e.key==='ArrowRight'){ swipe('right') } }
    }
    function swipe(dir){ const card=deckEl.lastElementChild; if(!card)return; const id=card.dataset.id; const p=deckData.find(x=>x.id===id); card.style.transition='transform .35s ease'; const offX=dir==='right'?window.innerWidth:-window.innerWidth; card.style.transform=`translate(${offX}px, -40px) rotate(${dir==='right'?15:-15}deg)`; setTimeout(()=>{ card.remove(); activeIndex++; if(dir==='right') onMatch(p); if(activeIndex<deckData.length) attachTopCard(); else deckEl.innerHTML="<div style='padding:16px;color:#334155'>No more profiles — adjust filters to see more.</div>" },260) }
    function onMatch(p){ if(!matches.find(m=>m.id===p.id)){ matches.unshift(p); store.set('tendor_matches',matches); renderMatches(); toast(`Matched with ${p.name}!`) } }
    function renderMatches(){ const box=$('#matches'); if(matches.length===0){ box.innerHTML=''; return } box.innerHTML='<h3 style="margin:8px 0">Your matches</h3>'; const list=el('div','', ''); matches.forEach(m=>{ const row=el('div','match-item',''); const left=el('div','info',''); left.append(el('div','mini')); const txt=el('div','',`<div style='font-weight:700'>${m.name} — ${m.category}</div><div style='color:#334155'>$${m.rate}/hr • ${m.distance} mi</div>`); left.append(txt); const actions=el('div','', ''); const emailBtn=el('a','btn','Email'); emailBtn.href=`mailto:${(m.email||'hello@tendor.app')}?subject=Tendor%20booking:%20${encodeURIComponent(m.category)}`; const removeBtn=el('button','btn','Remove'); removeBtn.onclick=()=>{ matches=matches.filter(x=>x.id!==m.id); store.set('tendor_matches',matches); renderMatches() }; actions.append(emailBtn,removeBtn); row.append(left,actions); list.append(row) }); box.append(list) }

    // Worker board
    function renderJobBoard(){ const board=$('#jobBoard'); board.innerHTML=''; if(jobs.length===0){ board.innerHTML='<div style="color:#334155">No jobs yet. Check back later.</div>'; return } jobs.forEach(j=>{ const row=el('div','job',''); const left=el('div','',`<h4>${j.title}</h4><div style='color:#334155'>${j.category} • $${j.budget} • ${j.zip}</div><div style='color:#64748b'>${j.desc}</div>`); const actions=el('div','', ''); const accept=el('button','btn primary','Accept'); accept.onclick=()=>{ acceptJob(j) }; actions.append(accept); row.append(left,actions); board.append(row) }) }
    function renderMyJobs(){ const list=$('#myJobs'); list.innerHTML=''; if(myAccepted.length===0){ list.innerHTML='<div style="color:#334155">No accepted jobs yet.</div>'; return } myAccepted.forEach(j=>{ const row=el('div','job',''); const left=el('div','',`<h4>${j.title}</h4><div style='color:#334155'>${j.category} • $${j.budget} • ${j.zip}</div><div style='color:#64748b'>${j.desc}</div>`); const actions=el('div','', ''); const done=el('button','btn','Mark done'); done.onclick=()=>{ myAccepted=myAccepted.filter(x=>x.id!==j.id); store.set('tendor_my_jobs',myAccepted); renderMyJobs(); toast('Job marked done') }; actions.append(done); row.append(left,actions); list.append(row) }) }
    function acceptJob(j){ if(!myAccepted.find(x=>x.id===j.id)){ myAccepted.unshift(j); store.set('tendor_my_jobs',myAccepted); renderMyJobs(); toast('Job accepted!') } }

    // Init customer & worker views
    function init(){
      renderCategoryChips(); rebuildDeck(); renderMatches(); renderJobBoard(); renderMyJobs();
    }

    // Landing demo: cycle through three lawn-care pros on ✖/✔
    (function(){
      const DEMO_PROFILES = [
        { name: "Ava R.",    rate: 28, dist: 2, skills: "Mowing • edging • cleanup", photo: "/images/lawn.jpg" },
        { name: "Jake C.",   rate: 26, dist: 3, skills: "Mowing • edging • cleanup", photo: "/images/lawn.jpg" },
        { name: "Miguel A.", rate: 30, dist: 2, skills: "Mowing • hedges • trimming", photo: "/images/lawn.jpg" }
      ];
      let di = 0; const toastBox = document.getElementById('demo-toast')
      const render = ()=>{ const d=DEMO_PROFILES[di]; document.getElementById('demo-img').src=d.photo; document.getElementById('demo-name').textContent=d.name; document.getElementById('demo-price').textContent=`$${d.rate}/hr • ${d.dist} mi`; document.getElementById('demo-skills').textContent=d.skills }
      const flash = (m)=>{ toastBox.textContent=m; toastBox.style.display='block'; clearTimeout(flash.t); flash.t=setTimeout(()=>toastBox.style.display='none',900) }
      const next = ()=>{ di=(di+1)%DEMO_PROFILES.length; render() }
      document.getElementById('demo-no').onclick = ()=>{ flash('Passed'); next() }
      document.getElementById('demo-yes').onclick = ()=>{ flash('Matched!'); next() }
      render()
    })()

    init()
  </script>
</body>
</html>
